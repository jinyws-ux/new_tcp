# 日志分析系统用户使用手顺书（使用者版）

## 概览
- 本系统用于：在已配置的服务器上检索与下载日志，使用预设的解析配置生成报告与辅助文本日志。
- 主模块：服务器配置、下载、分析、解析配置。
- 运行模式：
  - 客户端模式：桌面窗口内使用全部功能。
  - 网页模式：在浏览器访问 `http://localhost:5000`，可切回客户端或退出后台。

## 快速开始
- 解压并复制整个 `dist/LogTool/` 文件夹到本机（如 `D:\Tools\LogTool\`）。
- 双击 `D:\Tools\LogTool\LogTool.exe` 启动客户端模式。
- 首次启动会自动准备本地目录（下载与报告）。路径与解析配置由管理员预先设定，无需用户修改。

## 运行模式
- 切换到网页模式：
  - 客户端右上角点击“网页模式”→ 弹窗确认 → 自动打开浏览器并隐藏客户端窗口。
- 网页模式控制：
  - 右上角点击“切回客户端模式”→ 弹窗确认 → 恢复客户端窗口，同时关闭当前浏览器页。
  - 右上角点击“退出后台”→ 弹窗确认 → 停止服务并关闭当前浏览器页。
- 提示：部分浏览器会阻止脚本自动关闭标签页，如出现提示可手动关闭该页签。

## 服务器配置页
- 作用：维护服务器连接信息，供“下载页”使用。
- 新增：点击“新增配置”→ 填写厂区、系统、主机名、用户名、密码、别名 → 保存。
- 编辑/删除：在配置卡片上点击“编辑”“删除”。删除后该配置不再出现在下载页选择中。
- 搜索：顶部搜索框按别名/主机过滤；列表固定高度、内部滚动。
- 说明：服务器项通常由管理员维护；使用者可根据权限新增或编辑。

## 下载页
- 选择目标：在顶部选择厂区与系统。
- 节点：必填。可输入单个或多个（逗号分隔，如 `001,002,003`）；也可使用右侧区域模板批量选择。
- 搜索日志：
  - 选择日志类型：实时 或 归档（归档支持日期范围）。
  - 点击“搜索”，下方显示符合条件的日志列表（按节点聚合）。
- 下载：
  - 勾选需要下载的日志 → 点击“下载”。
  - 下载完成后：文件出现在“分析页”的已下载列表，并保存在本地下载目录（按“厂区/系统/节点”分层）。
- 注意：未填写节点会阻止搜索并提示错误；请至少填写一个节点或选择模板。

## 分析页
- 加载列表：点击“刷新列表”，显示已下载日志（文件名、节点、时间、大小）。
- 多选与全选：支持“全选/部分选/未选”状态指示；必须至少选择一条。
- 选择解析配置：从下拉框选择对应厂区/系统的解析配置（管理员预设）。未选择解析配置会阻止分析。
- 开始分析：
  - 勾选日志 → 点击“开始分析”。
  - 系统按解析规则生成：
    - 报告（HTML）：用于浏览查看。
    - 转换后的文本日志（`converted_*.log`）。
    - 排序后的文本日志（`sorted_*.log`）。
- 查看结果：
  - 点击“打开报告”，在默认浏览器查看 HTML 报告。
  - 点击“打开报告目录”，在资源管理器中查看输出文件。
- 分析统计：右侧展示本次分析的阶段耗时与输入/输出数量，便于把握过程与规模。

## 解析配置页（工作台使用）
- 进入工作台：选择厂区与系统 → 点击“进入工作台”。
- 浏览结构：左侧树（报文类型 → 版本 → 字段 → 转义），中间为编辑卡片，右侧为 JSON 预览。
- 常用操作：
  - 复制/粘贴：在卡片顶部点击“复制”，到目标层点击“粘贴”。粘贴成功后系统自动刷新。
  - 添加项：
    - 报文类型/版本/字段/转义均可点击“添加”按钮，弹窗居中，填写后确认即生效并刷新。
  - 撤销：支持撤销最近一次变更（有限次记录）。
  - 导入/导出（管理员用）：支持导入 JSON/YAML 与导出当前系统配置为 JSON。
- 提示：解析规则由管理员维护；使用者主要进行查看、复制与轻度编辑，或配合管理员完成变更。

## 常用操作速查
- 打开日志：在“分析页”列表点击“查看”，用默认编辑器打开。
- 删除日志：在“分析页”列表点击“删除”，同时移除对应元数据。
- 刷新解析配置：在“解析配置页”点击刷新，或配置变更后自动刷新。
- 报告目录：在“分析页”点击“打开报告目录”，直接查看输出文件。

## 附录（路径与配置简述）
- 路径与解析配置由管理员统一设定，使用者无需修改。
- 如需指向共享盘或调整目录结构，管理员会更新 `paths.json` 并通知使用者。